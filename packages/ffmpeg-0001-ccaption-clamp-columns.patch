python3 - <<'PY'
patch = """diff --git a/libavcodec/ccaption_dec.c b/libavcodec/ccaption_dec.c
--- a/libavcodec/ccaption_dec.c
+++ b/libavcodec/ccaption_dec.c
@@ -343,26 +343,51 @@ static void write_char(CCaptionSubContext *ctx, struct Screen *screen, char ch)
     uint8_t col = ctx->cursor_column;
     char *row = screen->characters[ctx->cursor_row];
     char *font = screen->fonts[ctx->cursor_row];
     char *color = screen->colors[ctx->cursor_row];
     char *bg = screen->bgs[ctx->cursor_row];
     char *charset = screen->charsets[ctx->cursor_row];
 
     if (col < SCREEN_COLUMNS) {
         row[col] = ch;
         font[col] = ctx->cursor_font;
         color[col] = ctx->cursor_color;
         bg[col] = ctx->bg_color;
         charset[col] = ctx->cursor_charset;
         ctx->cursor_charset = CCSET_BASIC_AMERICAN;
         if (ch) ctx->cursor_column++;
         return;
     }
     /* We have extra space at end only for null character */
     else if (col == SCREEN_COLUMNS && ch == 0) {
         row[col] = ch;
         return;
     }
     else {
-        av_log(ctx->logctx, AV_LOG_WARNING, "Data ignored due to columns exceeding screen width\\n");
-        return;
+        /*
+         * Some live streams emit invalid cursor positioning that pushes the
+         * column past the 32-column EIA-608 display. Be tolerant: clamp to the
+         * last visible column instead of dropping the character (dropping can
+         * cascade into garbled text).
+         */
+        av_log(ctx->logctx, AV_LOG_WARNING,
+               "Clamping CC column %u to %u (was out of display range)\\n",
+               col, SCREEN_COLUMNS - 1);
+
+        col = SCREEN_COLUMNS - 1;
+        ctx->cursor_column = col;
+
+        row[col] = ch;
+        font[col] = ctx->cursor_font;
+        color[col] = ctx->cursor_color;
+        bg[col] = ctx->bg_color;
+        charset[col] = ctx->cursor_charset;
+        ctx->cursor_charset = CCSET_BASIC_AMERICAN;
+        return;
     }
 }
"""
# IMPORTANT: preserve the "single space" context line(s) exactly as written above.
open("packages/ffmpeg-0001-ccaption-clamp-columns.patch", "w", encoding="utf-8", newline="\n").write(patch)
PY
